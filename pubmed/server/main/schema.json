{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Pubmed notice",
    "description": "A notice of a pubmed publication based on the parsed notice after download",
    "type": "object",
    "properties": {
        "source": {
            "type": "string",
            "enum": ["pubmed"]
        },
        "doi": {
            "type": "string",
            "pattern": "^10\\.\\d{4,9}/[-._;()/:a-zA-Z0-9]+$"
        },
        "title": {
            "type": "string"
        },
        "language": {
            "type": "string",
            "minLength": 2,
            "maxLength": 2,
            "enum": ["en", "sp", "fr"]
        },
        "abstract": {
            "type": "string"
        },
        "publication_date": {
            "type": "string",
            "format": "date",
            "minLength": 10,
            "maxLength": 10
        },
        "publication_year_month": {
            "type": "string",
            "format": "date",
            "minLength": 7,
            "maxLength": 7
        },
        "publication_year": {
            "type": "string",
            "format": "date",
            "minLength": 4,
            "maxLength": 4

        },
        "publication_types": {
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "authors": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "last_name": {
                        "type": "string"
                    },
                    "first_name": {
                        "type": "string"
                    },
                    "orcid": {
                        "type": "string",
                        "pattern": "^(\\d{4}-){3}\\d{3}[0-9X]$"
                    },
                    "external_ids": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id_type": {
                                    "type": "string",
                                    "enum": ["orcid"]
                                },
                                "id_value": {
                                    "type": "string",
                                    "format": "uri",
                                    "pattern": "^(http(s)?://orcid\\.org/)?(\\d{4}-){3}\\d{3}[0-9X]$"
                                }
                            },
                            "required": ["id_type", "id_value"]
                        }
                    },
                    "full_name": {
                        "type": "string"
                    },
                    "affiliations": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                },
                "additionalProperties": false,
                "required": ["full_name"]
            }
        },
        "affiliations": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    }
                },
                "additionalProperties": false,
                "required": ["name"]
            }
        },
        "keywords": {
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "url": {
            "type":  "string",
            "format": "uri",
            "pattern": "^https://www\\.ncbi\\.nlm\\.nih\\.gov/pubmed/\\d{8}$"
        },
        "pmid": {
            "type": "string",
            "pattern": "^\\d{8}$"
        },
        "mesh_headings": {
            "type": "array"
        },
        "databank": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "accession_numbers": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "accession_number": {
                                    "type": "string"
                                }
                            },
                            "required": ["accession_number"]
                        }
                    }
                },
                "additionalProperties": false,
                "required": ["name", "accession_numbers"]
            }
        },
        "grants": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "grantid": {
                        "type": "string"
                    },
                    "agency": {
                        "type": "string"
                    },
                    "country": {
                        "type": "string"
                    }
                },
                "additionalProperties": false,
                "required": ["agency", "country"]
            }
        },
        "has_grant": {
            "type": "boolean"
        },
        "coi": {
            "type": "string"
        },
        "issn_print": {
            "type": "string",
            "pattern": "^\\d{4}-\\d{3}[0-9X]$"
        },
        "issn_electronic": {
            "type": "string",
            "pattern": "^\\d{4}-\\d{3}[0-9X]$"
        },
        "journal_title": {
            "type": "string"
        }
    },
    "additionalProperties": false,
    "required": ["source", "title", "language", "abstract", "publication_date", "publication_year_month", "publication_year", "publication_types", "authors", "affiliations", "keywords", "url", "pmid", "mesh_headings", "databank", "has_grant", "journal_title"]
}